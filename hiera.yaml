---
version: 5

defaults:
  datadir: 'data'
  data_hash: 'yaml_data'

hierarchy:
  - name: "per-node data"
    path: "nodes/%{facts.hostname}.yaml"
  - name: "environment"
    path: "environments/%{facts.r10k_environment}.yaml"
  - name: "ec2 function"
    path: "ec2/%{facts.ec2_tags.application}-%{facts.ec2_tags.function}.yaml"
  - name: "role data"
    path: "roles/%{::role}.yaml"
  - name: 'splunk common'
    paths:
      - "%{facts.os.family}.yaml"
      - 'common.yaml'

